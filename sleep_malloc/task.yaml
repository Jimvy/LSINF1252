accessible: true
author: Mathieu Xhonneux & Maxime Mawait
context: |-
    The `malloc(3) <https://sites.uclouvain.be/SystInfo/manpages/man3/malloc.3.html>`_ function may fail, for instance if the OS has no free memory remaining. In this case, it may be possible that some other processes to free some memory after some time.

    In our program, instead of reporting an error immediately if no free memory is available, we will wait some time to see if the OS has freed memory for us.
environment: cpp
evaluate: best
groups: false
input_random: '0'
limits:
    time: '30'
    memory: '100'
    output: '2'
name: '[S3] Sleepy malloc'
network_grading: false
order: 27
problems:
    sleep_malloc:
        default: ''
        type: code
        language: c
        header: |-
            Write the body of the function ``sleepy_malloc``.


            .. code-block:: c

                /* Wrapper to the malloc system call.
                 * If malloc fails, sleep for 5 seconds, and then try again.
                 * If malloc failed 10 times in a row, return NULL.
                 */
                void *sleepy_malloc(size_t s) {
        name: Sleepy malloc
stored_submissions: 0
submission_limit:
    amount: -1
    period: -1
tags:
    '0':
        id: timeout
        type: 1
        name: Timeout
        description: Your code exceeds the maximum allowed time.
        visible: true
    '1':
        type: 1
        name: Segmentation Fault
        description: ''
        visible: true
        id: sigsegv
    '2':
        id: not_compile
        visible: true
        description: You code does not compile.
        name: Not compile
        type: 1
    '3':
        id: memory
        description: ''
        visible: true
        name: Memory Exceeded
        type: 1
    '4':
        description: ''
        type: 1
        id: sigfpe
        name: Floating Point Exception
        visible: true
    '5':
        type: 1
        id: double_free
        name: Double free
        description: Your code produced a double free.
        visible: true
    '6':
        name: Banned functions
        description: You use some banned functions.
        visible: true
        type: 1
        id: banned_funcs
    '7':
        type: 2
        visible: true
        name: S3
        description: ''
        id: ''
weight: 1.0
