accessible: true
author: Mathieu Xhonneux & Maxime Mawait
context: |-
    The `malloc(3) <https://sites.uclouvain.be/SystInfo/manpages/man3/malloc.3.html>`_ function may fail, for instance if the OS has no free memory remaining. In this case, it may be possible that some other processes to free some memory after some time.

    In our program, instead of reporting an error immediately if no free memory is available, we will wait some time to see if the OS has freed memory for us.
environment: cpp
evaluate: best
groups: false
limits:
    output: '2'
    time: '30'
    memory: '100'
name: '[S3] Sleepy malloc'
network_grading: false
order: 28
problems:
    sleep_malloc:
        language: c
        header: |-
            Write the body of the function ``sleepy_malloc``.


            .. code-block:: c

                /* Wrapper to the malloc system call.
                 * If malloc fails, sleep for 5 seconds, and then try again.
                 * If malloc failed 10 times in a row, return NULL.
                 */
                void *sleepy_malloc(size_t s) {
        name: Sleepy malloc
        type: code
stored_submissions: 0
submission_limit:
    amount: -1
    period: -1
tags:
    '0':
        visible: true
        description: Your code exceeds the maximum allowed time.
        type: 1
        name: Timeout
        id: timeout
    '1':
        type: 1
        description: ''
        id: sigsegv
        visible: true
        name: Segmentation Fault
    '2':
        description: You code does not compile.
        id: not_compile
        visible: true
        type: 1
        name: Not compile
    '3':
        name: Memory Exceeded
        type: 1
        id: memory
        description: ''
        visible: true
    '4':
        visible: true
        description: ''
        id: sigfpe
        name: Floating Point Exception
        type: 1
    '5':
        type: 1
        id: double_free
        name: Double free
        visible: true
        description: Your code produced a double free.
    '6':
        description: You use some banned functions.
        name: Banned functions
        visible: true
        id: banned_funcs
        type: 1
    '7':
        visible: true
        type: 2
        name: S3
        description: ''
        id: ''
weight: 1.0
