accessible: true
author: Olivier Martin
context: |-
    *Estimated time: 30 minutes*

    Given a file containing a large array of integers, you have to write a function to edit the element at a given index the array and another function to retrieve a specific element from this array.

    Since the array is huge, you cannot load it completely in memory. Consequently, you have to naviguate directly through the array in the file by using ``lseek(2)``.

    You may want to use ``fstat(2)`` to obtain informations about a given file.

    Use only ``open(2)``, ``read(2)``, ``write(2)``, ``close(2)`` and ``lseek(2)``.
environment: cpp
evaluate: best
groups: false
input_random: '0'
limits:
    output: '2'
    time: '30'
    memory: '50'
name: '[S5] Get and set on array stored in binary file '
network_grading: false
order: 48
problems:
    q1:
        type: code
        header: |-
            .. code-block:: c

                /*
                 * @pre filename != NULL, index >= 0
                 * @post return the integer at the index {index}
                 *       of the array in the file {filename}.
                 *       return -1 in case of error.
                 *       return -2 if index >= length of array.
                 */
                int get(char *filename, int index) {
        name: Retrieve the element at a given index
        language: c
    q2:
        type: code
        header: |-
            .. code-block:: c

                /*
                 * @pre filename != NULL, index >= 0
                 * @post set the element in the file {filename}
                 *       at index {index} at value {value}.
                 *       do nothing in case of errors
                 */
                void set(char *filename, int index, int value) {
        language: c
        name: Change the value at a given index
stored_submissions: 0
submission_limit:
    amount: -1
    period: -1
tags:
    '0':
        id: close
        description: This tag validate that your close are correctly performed.
        visible: true
        name: Close
        type: 0
    '1':
        id: open
        visible: true
        type: 0
        name: Open
        description: This tag validate you are able to open a file.
    '10':
        type: 1
        description: The get() function did not return the expected value.
        id: wrong_get_value_returned
        name: Wrong Get Value Returned
        visible: true
    '11':
        description: Your code exceeds the maximum allowed time.
        type: 1
        visible: true
        name: Timeout
        id: timeout
    '12':
        id: oob
        visible: true
        type: 1
        name: Out of bounds
        description: You try to read outside of the array.
    '13':
        visible: true
        description: You call the read or write function more than necessary.
        type: 1
        id: too_many_op
        name: Too many read/write
    '14':
        description: ''
        visible: true
        type: 1
        name: Segmentation Fault
        id: sigsegv
    '15':
        type: 1
        id: banned_funcs
        name: Banned functions
        visible: true
        description: You use some banned functions.
    '2':
        description: Your code produced a double free.
        name: Double free
        type: 1
        visible: true
        id: double_free
    '3':
        description: You do not manage failures properly.
        name: Failure handling
        type: 1
        id: failure_handling
        visible: true
    '4':
        id: sigfpe
        visible: true
        description: ''
        name: Floating Point Exception
        type: 1
    '5':
        type: 1
        id: memory
        description: ''
        name: Memory Exceeded
        visible: true
    '6':
        description: You code do not compile.
        id: not_compile
        type: 1
        name: Not compile
        visible: true
    '7':
        description: You have modified the original file.
        type: 1
        name: Original file modified
        id: original_modif
        visible: true
    '8':
        visible: true
        id: wrong_set_value
        description: The value written in the file has not the correct value.
        type: 1
        name: Wrong Set Value
    '9':
        id: wrong_index_set
        name: Wrong Index Set
        description: A value at an unwanted index was modified.
        type: 1
        visible: true
    '16':
        visible: true
        type: 2
        description: ''
        name: File
        id: ''
    '17':
        visible: true
        name: S5
        description: ''
        type: 2
        id: ''
weight: 1.0
